<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///init

instance_create(room_width / 2, room_height / 2, obj_music_info);
if(audio_is_playing(bgm_over)) audio_stop_sound(bgm_over);

//set bgm
bgm = irandom_range(1, 5);
if (bgm = 1) audio_play_sound(bgm_1, 10, true);
else if (bgm = 2) audio_play_sound(bgm_2, 10, true);
else if (bgm = 3) audio_play_sound(bgm_3, 10, true);
else if (bgm = 4) audio_play_sound(bgm_4, 10, true);
else if (bgm = 5) audio_play_sound(bgm_5, 10, true);

//set position
x = room_width / 2;
y = room_height / 2;

//variables
vibrate = 0;
item_speed = -5;
text_blink = false;
exit_sure = false;
paused = false;
select = 0;
opt_menu = 0;
if(global.dif = 3) {add = 0.5; global.enemy_dmg = 10; global.coin_earn = 200; global.heal_earn = 300}
else if(global.dif = 1) {add = 2; global.enemy_dmg = 3; global.coin_earn = 80; global.heal_earn = 180}
else if(global.dif = 2) {add = 0.5; global.enemy_dmg = 5; global.coin_earn = 100; global.heal_earn = 200}


//alarms wake
alarm[4] = 5;
alarm[1] = 10;

//create hitscreen
instance_create(0, 0, obj_hitscreen);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///give player 1 every 0.5 sec

if(instance_exists(obj_player)) {
    if(global.dif = 3) obj_player.coin += 3;
    else obj_player.coin += 1;
}
alarm[4] = 5;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///blink the text

text_blink = !text_blink;
alarm[1] = 10;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///spawn

//spawn coins
if(irandom(15 * add) = 1 &amp;&amp; !paused) instance_create(960, irandom_range(90, 454), obj_coins);

//spawn heal
if(irandom(110 * add) = 1 &amp;&amp; !paused &amp;&amp; obj_player.hp &lt; 95) instance_create(960, irandom_range(90, 454), obj_health);

//spawn enemy: orb
if(irandom(24 * add) = 1 &amp;&amp; !paused) instance_create(960, irandom_range(90, 454), obj_enemy_obs);

//spawn star
if(irandom(2) = 1 &amp;&amp; !paused) instance_create(960, irandom_range(90, 454), obj_star);

//spawn mother ship
if(irandom(180 * add) = 1 &amp;&amp; !paused){
    if !(instance_exists(obj_mothership)) instance_create(1, irandom_range(90, 454), obj_mothership);
}

//spawn obstacle wall
if(irandom(110 * add) = 1 &amp;&amp; !paused &amp;&amp; instance_exists(obj_player)){
    if !(instance_exists(obj_wall)) instance_create(958, irandom_range(90, 454), obj_wall);
}

//pause if start button pressed
if(gamepad_button_check_pressed(0, gp_start)) paused = !paused;

//function when being paused
if(paused) {
    //deactivate all object
    instance_deactivate_all(1);
    
    //let user make selection
    if(gamepad_button_check_pressed(0, gp_padd)) {select += 1;}
    else if(gamepad_button_check_pressed(0, gp_padu)) {select -= 1;}
    
    //clamp variable
    if(!exit_sure || opt_menu) select = clamp(select, 0, 2);
    else if(exit_sure) select = clamp(select, 0, 1);
    
    //perform action for:
    
    //pause
    if(gamepad_button_check_pressed(0, gp_face1) &amp;&amp; select = 0 &amp;&amp; !exit_sure &amp;&amp; !opt_menu) paused = false; 
    else if(gamepad_button_check_pressed(0, gp_face1) &amp;&amp; select = 2 &amp;&amp; !exit_sure &amp;&amp; !opt_menu){ exit_sure = true; select = 0;}
    else if(gamepad_button_check_pressed(0, gp_face1) &amp;&amp; select = 1 &amp;&amp; !exit_sure &amp;&amp; !opt_menu){ opt_menu = true; select = 0;}
    
    //exit
    else if(gamepad_button_check_pressed(0, gp_face1) &amp;&amp; select = 0 &amp;&amp; exit_sure &amp;&amp; !opt_menu) { exit_sure = false; select = 0;}
    else if(gamepad_button_check_pressed(0, gp_face1) &amp;&amp; select = 1 &amp;&amp; exit_sure &amp;&amp; !opt_menu) { room_goto(rm_mainmenu);}
    
    //option
    else if(gamepad_button_check_pressed(0, gp_face1) &amp;&amp; select = 2 &amp;&amp; !exit_sure &amp;&amp; opt_menu) { opt_menu = false; select = 0;}
    else if(gamepad_button_check_pressed(0, gp_face1) &amp;&amp; select = 0 &amp;&amp; !exit_sure &amp;&amp; opt_menu) { 
        global.reduce = !global.reduce;
        ini_open("data.ini");
        ini_write_real("data", "reduce", global.reduce);
        ini_close();
    }
    else if(gamepad_button_check_pressed(0, gp_face1) &amp;&amp; select = 1 &amp;&amp; !exit_sure &amp;&amp; opt_menu) { 
        global.show_fps = !global.show_fps;
        ini_open("data.ini");
        ini_write_real("data", "fps", global.show_fps);
        ini_close();
    }
    
}
else instance_activate_all(); //reactivate all object, make it unpaused

//vibrate, when player get damage
if(!global.reduce){
    y = (room_height / 2) + vibrate;
    if(vibrate != 0) vibrate -= 1;
    vibrate = clamp(vibrate, 0, 10);
}

//if player health is &lt;= 0, then gameover
if(instance_exists(obj_player) &amp;&amp; obj_player.hp &lt;= 0 &amp;&amp; !instance_exists(obj_gameover) ) instance_create(x, y, obj_gameover);

if(paused) audio_pause_all();
else if(!paused) audio_resume_all();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///draw things

//health bar
draw_set_colour(c_red);
if(instance_exists(obj_player)) draw_rectangle(0, 0, (obj_player.hp / 100) * (room_width), 79, false);

//info
draw_set_colour(c_white);
draw_rectangle(0, 79, 960, 80, false);
if(!paused) draw_rectangle(0, 480, 960, 481, false);
draw_set_font(ft_text);
draw_set_valign(fa_middle);
if(instance_exists(obj_player)) {
    if(global.show_fps)draw_text(32, 79 / 2, "HP: " + string(obj_player.hp) + " | Score: " + string(obj_player.coin) + " | FPS: " + string(fps));
    else if(!global.show_fps)draw_text(32, 79 / 2, "HP: " + string(obj_player.hp) + " | Score: " + string(obj_player.coin));
}
if(!paused) draw_text(32, ((room_height - 481) / 2) + 481, "X: Ascend. L: Boost. Start: Pause. PS: Exit"); 
else if(paused){
    draw_text(32, ((room_height - 481) / 2) + 481, "Start: Resume. PS: Exit");
    
    draw_set_halign(fa_center);
    draw_set_valign(fa_middle);
    draw_set_font(ft_header);
    if(text_blink) draw_text(room_width / 2, 240, "Paused");
    
    draw_set_colour(c_red);
    
    //selection box
    if(select = 0) draw_rectangle(0, 330 - 20, room_width, 330 + 20, false);
    else if(select = 1) draw_rectangle(0, 370 - 20, room_width, 370 + 20, false);
    else if(select = 2) draw_rectangle(0, 410 - 20, room_width, 410 + 20, false);
    
   
    
    //draw selection    
    draw_set_font(ft_text);
    draw_set_colour(c_white);
    if(!exit_sure &amp;&amp; !opt_menu){
        draw_text(room_width / 2, 290, "Last High Score: " + string(global.hscore));
        draw_text(room_width / 2, 330, "Resume");
        draw_text(room_width / 2, 370, "Options");
        draw_text(room_width / 2, 410, "Main Menu")
    }
    else if(!exit_sure &amp;&amp; opt_menu){
        draw_text(room_width / 2, 290, "Options");
        if(global.reduce) draw_text(room_width / 2, 330, "Reduce Effect [y]");
        else if(!global.reduce) draw_text(room_width / 2, 330, "Reduce Effect [n]");
        
        if(global.show_fps) draw_text(room_width / 2, 370, "Show FPS [y]");
        else if(!global.show_fps) draw_text(room_width / 2, 370, "Show FPS [n]");
        draw_text(room_width / 2, 410, "Back")
    }
    else if(exit_sure &amp;&amp; !opt_menu){
        draw_text(room_width / 2, 290, "Are you sure to exit? (you current score will be abandoned)");
        draw_text(room_width / 2, 330, "No");
        draw_text(room_width / 2, 370, "Yes"); 
    }
}

draw_set_font(ft_text);

//make allignment default
draw_set_halign(fa_left);
draw_set_valign(fa_top);

//info on player
draw_set_colour(c_yellow);
if(instance_exists(obj_player))draw_text(32, obj_player.y, string(obj_player.hp) + " &gt;");
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
